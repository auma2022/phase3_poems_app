{"ast":null,"code":"import _slicedToArray from\"/home/moringa/Documents/phase3/phase3_poems_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import AddReview from\"./AddReview\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EachBook=function EachBook(_ref){var _book$reviews;var book=_ref.book,handleUpdateLikes=_ref.handleUpdateLikes,handleDeleteReview=_ref.handleDeleteReview,addReview=_ref.addReview;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),displayReview=_useState2[0],setDisplayReview=_useState2[1];var showReview=function showReview(event){event.preventDefault();setDisplayReview(!displayReview);};function updateLikes(){var addLikes={likes:book.likes+1};fetch(\"https://poem-books.herokuapp.com/books/\".concat(book.id),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(addLikes)}).then(function(response){return response.json();}).then(handleUpdateLikes);}function deleteReview(id){fetch(\"https://poem-books.herokuapp.com/reviews/\".concat(id),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\"}}).then(function(response){return response.json();}).then(function(data){return handleDeleteReview(data);});}var eachReview=(_book$reviews=book.reviews)===null||_book$reviews===void 0?void 0:_book$reviews.map(function(review){return/*#__PURE__*/_jsxs(\"li\",{className:\"noBullet\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"deleteButton\",onClick:function onClick(){return deleteReview(review.id);},children:[\"\\u2716\",\" \"]}),review.text]},review.id);});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bookCard\",children:[/*#__PURE__*/_jsx(\"h3\",{children:book.title}),/*#__PURE__*/_jsx(\"h4\",{children:book.author}),/*#__PURE__*/_jsxs(\"button\",{className:\"button\",onClick:updateLikes,children:[\"Likes: \",book.likes]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:showReview,children:displayReview?\"Hide Reviews\":\"Show Reviews\"}),displayReview?/*#__PURE__*/_jsx(\"ul\",{children:eachReview}):null,/*#__PURE__*/_jsx(AddReview,{book:book,addReview:addReview})]}),/*#__PURE__*/_jsx(\"hr\",{})]});};export default EachBook;","map":{"version":3,"sources":["/home/moringa/Documents/phase3/phase3_poems_app/src/EachBook.js"],"names":["React","useState","AddReview","EachBook","book","handleUpdateLikes","handleDeleteReview","addReview","displayReview","setDisplayReview","showReview","event","preventDefault","updateLikes","addLikes","likes","fetch","id","method","headers","body","JSON","stringify","then","response","json","deleteReview","data","eachReview","reviews","map","review","text","title","author"],"mappings":"qIAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,C,6IAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAMX,sBALJC,CAAAA,IAKI,MALJA,IAKI,CAJJC,iBAII,MAJJA,iBAII,CAHJC,kBAGI,MAHJA,kBAGI,CADJC,SACI,MADJA,SACI,CACJ,cAA0CN,QAAQ,CAAC,KAAD,CAAlD,wCAAOO,aAAP,eAAsBC,gBAAtB,eAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,KAAD,CAAW,CAC5BA,KAAK,CAACC,cAAN,GACAH,gBAAgB,CAAC,CAACD,aAAF,CAAhB,CACD,CAHD,CAKA,QAASK,CAAAA,WAAT,EAAuB,CACrB,GAAMC,CAAAA,QAAQ,CAAG,CACfC,KAAK,CAAEX,IAAI,CAACW,KAAL,CAAa,CADL,CAAjB,CAIAC,KAAK,kDAA2CZ,IAAI,CAACa,EAAhD,EAAsD,CACzDC,MAAM,CAAE,OADiD,CAEzDC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFgD,CAKzDC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeR,QAAf,CALmD,CAAtD,CAAL,CAOGS,IAPH,CAOQ,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EAPR,EAQGF,IARH,CAQQlB,iBARR,EASD,CAED,QAASqB,CAAAA,YAAT,CAAsBT,EAAtB,CAA0B,CACxBD,KAAK,oDAA6CC,EAA7C,EAAmD,CACtDC,MAAM,CAAE,QAD8C,CAEtDC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAF6C,CAAnD,CAAL,CAIGI,IAJH,CAIQ,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EAJR,EAKGF,IALH,CAKQ,SAACI,IAAD,QAAUrB,CAAAA,kBAAkB,CAACqB,IAAD,CAA5B,EALR,EAMD,CAED,GAAMC,CAAAA,UAAU,gBAAGxB,IAAI,CAACyB,OAAR,wCAAG,cAAcC,GAAd,CAAkB,SAACC,MAAD,qBACnC,YAAI,SAAS,CAAC,UAAd,wBAEE,gBAAQ,SAAS,CAAC,cAAlB,CAAiC,OAAO,CAAE,yBAAML,CAAAA,YAAY,CAACK,MAAM,CAACd,EAAR,CAAlB,EAA1C,oBACI,GADJ,GAFF,CAKGc,MAAM,CAACC,IALV,GAA8BD,MAAM,CAACd,EAArC,CADmC,EAAlB,CAAnB,CAUA,mBACE,wCACE,aAAK,SAAS,CAAC,UAAf,wBACE,oBAAKb,IAAI,CAAC6B,KAAV,EADF,cAEE,oBAAK7B,IAAI,CAAC8B,MAAV,EAFF,cAIE,gBAAQ,SAAS,CAAC,QAAlB,CAA2B,OAAO,CAAErB,WAApC,qBACUT,IAAI,CAACW,KADf,GAJF,cAOE,aAPF,cAQE,eAAQ,SAAS,CAAC,QAAlB,CAA2B,OAAO,CAAEL,UAApC,UACGF,aAAa,CAAG,cAAH,CAAoB,cADpC,EARF,CAYGA,aAAa,cAAG,oBAAKoB,UAAL,EAAH,CAA2B,IAZ3C,cAaE,KAAC,SAAD,EAAW,IAAI,CAAExB,IAAjB,CAAuB,SAAS,CAAEG,SAAlC,EAbF,GADF,cAgBE,aAhBF,GADF,CAoBD,CArED,CAuEA,cAAeJ,CAAAA,QAAf","sourcesContent":["import React, { useState } from \"react\";\nimport AddReview from \"./AddReview\";\n\nconst EachBook = ({\n  book,\n  handleUpdateLikes,\n  handleDeleteReview,\n\n  addReview,\n}) => {\n  const [displayReview, setDisplayReview] = useState(false);\n\n  const showReview = (event) => {\n    event.preventDefault();\n    setDisplayReview(!displayReview);\n  };\n\n  function updateLikes() {\n    const addLikes = {\n      likes: book.likes + 1,\n    };\n\n    fetch(`https://poem-books.herokuapp.com/books/${book.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(addLikes),\n    })\n      .then((response) => response.json())\n      .then(handleUpdateLikes);\n  }\n\n  function deleteReview(id) {\n    fetch(`https://poem-books.herokuapp.com/reviews/${id}`, {\n      method: \"DELETE\",\n      headers: { \"Content-Type\": \"application/json\" },\n    })\n      .then((response) => response.json())\n      .then((data) => handleDeleteReview(data));\n  }\n\n  const eachReview = book.reviews?.map((review) => (\n    <li className=\"noBullet\" key={review.id}>\n      {/* <br /> */}\n      <button className=\"deleteButton\" onClick={() => deleteReview(review.id)}>\n        âœ–{\" \"}\n      </button>\n      {review.text}\n    </li>\n  ));\n\n  return (\n    <>\n      <div className=\"bookCard\">\n        <h3>{book.title}</h3>\n        <h4>{book.author}</h4>\n\n        <button className=\"button\" onClick={updateLikes}>\n          Likes: {book.likes}\n        </button>\n        <br />\n        <button className=\"button\" onClick={showReview}>\n          {displayReview ? \"Hide Reviews\" : \"Show Reviews\"}\n        </button>\n\n        {displayReview ? <ul>{eachReview}</ul> : null}\n        <AddReview book={book} addReview={addReview} />\n      </div>\n      <hr />\n    </>\n  );\n};\n\nexport default EachBook;\n"]},"metadata":{},"sourceType":"module"}