{"ast":null,"code":"import _defineProperty from\"/home/moringa/Documents/phase3/phase3_poems_app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/moringa/Documents/phase3/phase3_poems_app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/moringa/Documents/phase3/phase3_poems_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useState,useEffect}from\"react\";//import { useNavigate } from \"react-router-dom\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Signin=function Signin(){//const navigate = useNavigate();\nvar _useState=useState({name:\"\",password:\"\",remember_me:true}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setIsLoading=_useState4[1];var userRef=React.useRef();useEffect(function(){if(null!==userRef.current){userRef.current.focus();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);//hangle change event\nvar handleChange=function handleChange(event){var key=event.target.id;var value=event.target.type===\"checkbox\"?event.target.checked:event.target.value;setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},key,value)));};//submission form function\nvar handleSubmit=function handleSubmit(e){e.preventDefault();axios.post(\"http://localhost:9292/user/login\",formData).then(function(response){if(Object.values(response.data).length>1){localStorage.setItem(\"name\",JSON.stringify(response.data));localStorage.setItem(\"authenticated\",JSON.stringify(true));alert(\"Login successful\");//navigate(\"/home/dashboard\");\n}else{alert(\"user doesn't exist\");setFormData({username:\"\",password:\"\"});}}).then(function(){return setIsLoading(false);});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Sign in to start your session\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Username\",/*#__PURE__*/_jsx(\"input\",{className:\"inputs\",type:\"text\",placeholder:\"Usename\",id:\"name\",autoComplete:\"off\",required:true,onChange:handleChange,ref:userRef,value:formData===null||formData===void 0?void 0:formData.name})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Password\",/*#__PURE__*/_jsx(\"input\",{className:\"inputs\",type:\"password\",placeholder:\"**\",id:\"password\",required:true,value:formData===null||formData===void 0?void 0:formData.password,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"remember_me\",checked:formData===null||formData===void 0?void 0:formData.remember_me,onChange:handleChange}),/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Remeber Me\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-pry\",type:\"submit\",children:\"Sign In\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"misc\",children:/*#__PURE__*/_jsx(\"p\",{children:\"I forgot my password\"})})]})});};export default Signin;","map":{"version":3,"sources":["/home/moringa/Documents/phase3/phase3_poems_app/src/Signin.js"],"names":["axios","React","useState","useEffect","Signin","name","password","remember_me","formData","setFormData","loading","setIsLoading","userRef","useRef","current","focus","handleChange","event","key","target","id","value","type","checked","handleSubmit","e","preventDefault","post","then","response","Object","values","data","length","localStorage","setItem","JSON","stringify","alert","username"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\n//import { useNavigate } from \"react-router-dom\";\n\n\nconst Signin = () => {\n  //const navigate = useNavigate();\n  const [formData, setFormData] = useState({\n    name: \"\",\n    password: \"\",\n    remember_me: true,\n  });\n  const [loading, setIsLoading] = useState(true);\n  const userRef = React.useRef();\n\n  useEffect(() => {\n    if (null !== userRef.current) {\n      userRef.current.focus();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  //hangle change event\n  const handleChange = (event) => {\n    const key = event.target.id;\n    const value =\n      event.target.type === \"checkbox\"\n        ? event.target.checked\n        : event.target.value;\n\n    setFormData({ ...formData, [key]: value });\n  };\n\n  //submission form function\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    axios.post(\"http://localhost:9292/user/login\", formData)\n      .then((response) => {\n        if (Object.values(response.data).length > 1) {\n          localStorage.setItem(\"name\", JSON.stringify(response.data));\n          localStorage.setItem(\"authenticated\", JSON.stringify(true));\n          alert(\"Login successful\");\n          //navigate(\"/home/dashboard\");\n        } else {\n          alert(\"user doesn't exist\");\n          setFormData({\n            username: \"\",\n            password: \"\",\n          });\n        }\n      })\n      .then(() => setIsLoading(false));\n  };\n\n  return (\n    <>\n      <form onSubmit={handleSubmit}>\n        <h4>Sign in to start your session</h4>\n        <label>\n          Username\n          <input\n            className=\"inputs\"\n            type=\"text\"\n            placeholder=\"Usename\"\n            id=\"name\"\n            autoComplete=\"off\"\n            required\n            onChange={handleChange}\n            ref={userRef}\n            value={formData?.name}\n          />\n        </label>\n        <label>\n          Password\n          <input\n            className=\"inputs\"\n            type=\"password\"\n            placeholder=\"**\"\n            id=\"password\"\n            required\n            value={formData?.password}\n            onChange={handleChange}\n          />\n        </label>\n        <div className=\"nav\">\n          <span>\n            <input\n              type=\"checkbox\"\n              id=\"remember_me\"\n              checked={formData?.remember_me}\n              onChange={handleChange}\n            />\n            <h3>\n              <strong>Remeber Me</strong>\n            </h3>\n          </span>\n          <button className=\"btn-pry\" type=\"submit\">\n            Sign In\n          </button>\n        </div>\n        <span className=\"misc\">\n          {/* eslint-disable-next-line react-hooks/exhaustive-deps */}\n          <p >I forgot my password</p>\n        </span>\n      </form>\n    </>\n  );\n};\n\nexport default Signin;"]},"metadata":{},"sourceType":"module"}