{"ast":null,"code":"import _toConsumableArray from\"/home/moringa/Documents/phase3/phase3_poems_app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/moringa/Documents/phase3/phase3_poems_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./App.css\";import Home from\"./Home\";import NavBar from\"./NavBar\";import Books from\"./Books\";import FormPage from\"./FormPage\";import{Route}from\"react-router-dom\";import{useState,useEffect}from\"react\";import Signin from\"./Signin\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),books=_useState2[0],setBooks=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),reviews=_useState4[0],setReviews=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),searchTerm=_useState6[0],setSearchTerm=_useState6[1];useEffect(function(){fetch(\"https://poem-books.herokuapp.com/books\").then(function(response){return response.json();}).then(function(data){setBooks(data);});},[]);function addBooks(newBook){var updatedBooks=[newBook].concat(_toConsumableArray(books));setBooks(updatedBooks);}function addReview(newReview){var bookToUpdate=books.find(function(book){return book.id===newReview.book_id;});var updatedReviews=[newReview].concat(_toConsumableArray(bookToUpdate.reviews));bookToUpdate.reviews=updatedReviews;setBooks(books.map(function(book){return book.id===bookToUpdate.id?bookToUpdate:book;}));setReviews(updatedReviews);}function handleUpdateLikes(updateLikes){var updatedLikes=books.map(function(book){return book.id===updateLikes.id?updateLikes:book;});setBooks(updatedLikes);}function handleDeleteReview(deletedReview){var bookToUpdate=books.find(function(book){return book.id===deletedReview.book_id;});var updatedReview=bookToUpdate.reviews.filter(function(review){return review.id!==deletedReview.id;});bookToUpdate.reviews=updatedReview;setBooks(books.map(function(book){return book.id===bookToUpdate.id?bookToUpdate:book;}));setReviews(updatedReview);}var booksToDisplay=books.filter(function(book){return book.title.toLowerCase().includes(searchTerm.toLowerCase());});return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Route,{path:\"/books\",children:/*#__PURE__*/_jsx(Books,{handleUpdateLikes:handleUpdateLikes,addReview:addReview,books:books,booksToDisplay:booksToDisplay,searchTerm:searchTerm,onSearch:setSearchTerm,handleDeleteReview:handleDeleteReview,reviews:reviews})}),/*#__PURE__*/_jsx(Route,{path:\"/formpage\",children:/*#__PURE__*/_jsx(FormPage,{addBooks:addBooks})}),/*#__PURE__*/_jsx(Route,{path:\"/signin\",children:/*#__PURE__*/_jsx(Signin,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(Home,{})})]});}export default App;","map":{"version":3,"sources":["/home/moringa/Documents/phase3/phase3_poems_app/src/App.js"],"names":["Home","NavBar","Books","FormPage","Route","useState","useEffect","Signin","App","books","setBooks","reviews","setReviews","searchTerm","setSearchTerm","fetch","then","response","json","data","addBooks","newBook","updatedBooks","addReview","newReview","bookToUpdate","find","book","id","book_id","updatedReviews","map","handleUpdateLikes","updateLikes","updatedLikes","handleDeleteReview","deletedReview","updatedReview","filter","review","booksToDisplay","title","toLowerCase","includes"],"mappings":"kRAAA,MAAO,WAAP,CACA,MAAOA,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,OAASC,KAAT,KAAsB,kBAAtB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,C,wFAEA,QAASC,CAAAA,GAAT,EAAe,CACb,cAA0BH,QAAQ,CAAC,EAAD,CAAlC,wCAAOI,KAAP,eAAcC,QAAd,eACA,eAA8BL,QAAQ,CAAC,EAAD,CAAtC,yCAAOM,OAAP,eAAgBC,UAAhB,eACA,eAAoCP,QAAQ,CAAC,EAAD,CAA5C,yCAAOQ,UAAP,eAAmBC,aAAnB,eACAR,SAAS,CAAC,UAAM,CACdS,KAAK,0CAAL,CACGC,IADH,CACQ,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EADR,EAEGF,IAFH,CAEQ,SAACG,IAAD,CAAU,CACdT,QAAQ,CAACS,IAAD,CAAR,CACD,CAJH,EAKD,CANQ,CAMN,EANM,CAAT,CAQA,QAASC,CAAAA,QAAT,CAAkBC,OAAlB,CAA2B,CACzB,GAAMC,CAAAA,YAAY,EAAID,OAAJ,4BAAgBZ,KAAhB,EAAlB,CACAC,QAAQ,CAACY,YAAD,CAAR,CACD,CAED,QAASC,CAAAA,SAAT,CAAmBC,SAAnB,CAA8B,CAC5B,GAAMC,CAAAA,YAAY,CAAGhB,KAAK,CAACiB,IAAN,CAAW,SAACC,IAAD,CAAU,CACxC,MAAOA,CAAAA,IAAI,CAACC,EAAL,GAAYJ,SAAS,CAACK,OAA7B,CACD,CAFoB,CAArB,CAIA,GAAMC,CAAAA,cAAc,EAAIN,SAAJ,4BAAkBC,YAAY,CAACd,OAA/B,EAApB,CACAc,YAAY,CAACd,OAAb,CAAuBmB,cAAvB,CACApB,QAAQ,CACND,KAAK,CAACsB,GAAN,CAAU,SAACJ,IAAD,QAAWA,CAAAA,IAAI,CAACC,EAAL,GAAYH,YAAY,CAACG,EAAzB,CAA8BH,YAA9B,CAA6CE,IAAxD,EAAV,CADM,CAAR,CAIAf,UAAU,CAACkB,cAAD,CAAV,CACD,CAED,QAASE,CAAAA,iBAAT,CAA2BC,WAA3B,CAAwC,CACtC,GAAMC,CAAAA,YAAY,CAAGzB,KAAK,CAACsB,GAAN,CAAU,SAACJ,IAAD,CAAU,CACvC,MAAOA,CAAAA,IAAI,CAACC,EAAL,GAAYK,WAAW,CAACL,EAAxB,CAA6BK,WAA7B,CAA2CN,IAAlD,CACD,CAFoB,CAArB,CAGAjB,QAAQ,CAACwB,YAAD,CAAR,CACD,CACD,QAASC,CAAAA,kBAAT,CAA4BC,aAA5B,CAA2C,CACzC,GAAMX,CAAAA,YAAY,CAAGhB,KAAK,CAACiB,IAAN,CAAW,SAACC,IAAD,CAAU,CACxC,MAAOA,CAAAA,IAAI,CAACC,EAAL,GAAYQ,aAAa,CAACP,OAAjC,CACD,CAFoB,CAArB,CAIA,GAAMQ,CAAAA,aAAa,CAAGZ,YAAY,CAACd,OAAb,CAAqB2B,MAArB,CAA4B,SAACC,MAAD,CAAY,CAC5D,MAAOA,CAAAA,MAAM,CAACX,EAAP,GAAcQ,aAAa,CAACR,EAAnC,CACD,CAFqB,CAAtB,CAIAH,YAAY,CAACd,OAAb,CAAuB0B,aAAvB,CACA3B,QAAQ,CACND,KAAK,CAACsB,GAAN,CAAU,SAACJ,IAAD,QAAWA,CAAAA,IAAI,CAACC,EAAL,GAAYH,YAAY,CAACG,EAAzB,CAA8BH,YAA9B,CAA6CE,IAAxD,EAAV,CADM,CAAR,CAGAf,UAAU,CAACyB,aAAD,CAAV,CACD,CAED,GAAMG,CAAAA,cAAc,CAAG/B,KAAK,CAAC6B,MAAN,CAAa,SAACX,IAAD,CAAU,CAC5C,MAAOA,CAAAA,IAAI,CAACc,KAAL,CAAWC,WAAX,GAAyBC,QAAzB,CAAkC9B,UAAU,CAAC6B,WAAX,EAAlC,CAAP,CACD,CAFsB,CAAvB,CAIA,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,KAAC,MAAD,IADF,cAEE,aAFF,cAGE,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,uBACE,KAAC,KAAD,EACE,iBAAiB,CAAEV,iBADrB,CAEE,SAAS,CAAET,SAFb,CAGE,KAAK,CAAEd,KAHT,CAIE,cAAc,CAAE+B,cAJlB,CAKE,UAAU,CAAE3B,UALd,CAME,QAAQ,CAAEC,aANZ,CAOE,kBAAkB,CAAEqB,kBAPtB,CAQE,OAAO,CAAExB,OARX,EADF,EAHF,cAeE,KAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,uBACE,KAAC,QAAD,EAAU,QAAQ,CAAES,QAApB,EADF,EAfF,cAkBG,KAAC,KAAD,EAAO,IAAI,CAAC,SAAZ,uBACC,KAAC,MAAD,IADD,EAlBH,cAsBE,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,uBACE,KAAC,IAAD,IADF,EAtBF,GADF,CA4BD,CAED,cAAeZ,CAAAA,GAAf","sourcesContent":["import \"./App.css\";\nimport Home from \"./Home\";\nimport NavBar from \"./NavBar\";\nimport Books from \"./Books\";\nimport FormPage from \"./FormPage\";\nimport { Route } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport Signin from \"./Signin\";\n\nfunction App() {\n  const [books, setBooks] = useState([]);\n  const [reviews, setReviews] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  useEffect(() => {\n    fetch(`https://poem-books.herokuapp.com/books`)\n      .then((response) => response.json())\n      .then((data) => {\n        setBooks(data);\n      });\n  }, []);\n\n  function addBooks(newBook) {\n    const updatedBooks = [newBook, ...books];\n    setBooks(updatedBooks);\n  }\n\n  function addReview(newReview) {\n    const bookToUpdate = books.find((book) => {\n      return book.id === newReview.book_id;\n    });\n\n    const updatedReviews = [newReview, ...bookToUpdate.reviews];\n    bookToUpdate.reviews = updatedReviews;\n    setBooks(\n      books.map((book) => (book.id === bookToUpdate.id ? bookToUpdate : book))\n    );\n\n    setReviews(updatedReviews);\n  }\n\n  function handleUpdateLikes(updateLikes) {\n    const updatedLikes = books.map((book) => {\n      return book.id === updateLikes.id ? updateLikes : book;\n    });\n    setBooks(updatedLikes);\n  }\n  function handleDeleteReview(deletedReview) {\n    const bookToUpdate = books.find((book) => {\n      return book.id === deletedReview.book_id;\n    });\n\n    const updatedReview = bookToUpdate.reviews.filter((review) => {\n      return review.id !== deletedReview.id;\n    });\n\n    bookToUpdate.reviews = updatedReview;\n    setBooks(\n      books.map((book) => (book.id === bookToUpdate.id ? bookToUpdate : book))\n    );\n    setReviews(updatedReview);\n  }\n\n  const booksToDisplay = books.filter((book) => {\n    return book.title.toLowerCase().includes(searchTerm.toLowerCase());\n  });\n\n  return (\n    <div className=\"App\">\n      <NavBar />\n      <br />\n      <Route path=\"/books\">\n        <Books\n          handleUpdateLikes={handleUpdateLikes}\n          addReview={addReview}\n          books={books}\n          booksToDisplay={booksToDisplay}\n          searchTerm={searchTerm}\n          onSearch={setSearchTerm}\n          handleDeleteReview={handleDeleteReview}\n          reviews={reviews}\n        />\n      </Route>\n      <Route path=\"/formpage\">\n        <FormPage addBooks={addBooks} />\n      </Route>\n       <Route path=\"/signin\">\n        <Signin/>\n      </Route>\n\n      <Route exact path=\"/\">\n        <Home />\n      </Route>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}